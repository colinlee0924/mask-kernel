# MASK Kernel

**M**ulti-**A**gent **S**kill **K**it - A framework for building expertise agents with progressive skill disclosure.

## Features

- **Progressive Disclosure**: Skills are discovered and loaded on-demand
- **LLM Factory**: Tier-based model selection (fast/thinking/pro)
- **A2A Protocol**: Agent-to-Agent communication for multi-agent ecosystems
- **MCP Integration**: Connect to MCP servers for external tools
- **CLI Scaffold**: Generate new agent projects with `mask init`
- **Built-in Observability**: Phoenix/Langfuse tracing with A2A noise filtering

## Installation

```bash
# From GitHub (recommended)
pip install "mask-kernel[phoenix,anthropic] @ git+https://github.com/colinlee0924/mask-kernel.git"
```

With optional dependencies:

```bash
# With Anthropic LLM support
pip install "mask-kernel[anthropic] @ git+https://github.com/colinlee0924/mask-kernel.git"

# With Phoenix observability (recommended)
pip install "mask-kernel[phoenix] @ git+https://github.com/colinlee0924/mask-kernel.git"

# With Langfuse observability
pip install "mask-kernel[observability] @ git+https://github.com/colinlee0924/mask-kernel.git"

# With MCP integration
pip install "mask-kernel[mcp] @ git+https://github.com/colinlee0924/mask-kernel.git"

# All optional dependencies
pip install "mask-kernel[all] @ git+https://github.com/colinlee0924/mask-kernel.git"
```

## Quick Start

### 1. Create a new agent project

```bash
mask init my-agent
cd my-agent
```

### 2. Configure environment

```bash
cp .env.example .env
# Edit .env and add your ANTHROPIC_API_KEY
```

### 3. Install dependencies

```bash
pip install -e ".[dev]"
```

### 4. Start the agent server

```bash
python -m my_agent.main
```

### 5. Run tests

```bash
# In another terminal
python tests/test_a2a.py
```

### 6. View traces in Phoenix

Open http://localhost:6006 and find your project traces.

## Generated Project Structure

```
my-agent/
├── .env.example              # Environment template
├── pyproject.toml            # Dependencies (includes phoenix, anthropic)
├── README.md
├── config/
│   └── prompts/
│       └── system.md         # Agent system prompt
├── src/my_agent/
│   ├── __init__.py
│   ├── agent.py              # Agent implementation
│   ├── main.py               # A2A server with Phoenix tracing
│   └── skills/               # Add your skills here
└── tests/
    ├── test_agent.py         # Unit tests
    └── test_a2a.py           # A2A integration tests
```

## Observability

Phoenix tracing is enabled by default with A2A noise filtering:

```python
from mask.observability import setup_openinference_tracing

# In your main.py (auto-generated by mask init)
setup_openinference_tracing(
    project_name="my-agent",
    endpoint="http://localhost:6006",
)
```

Traces show clean agent execution:
```
MyAgent → model → model_node → ChatAnthropic → _write
```

## Documentation

See the [full documentation](docs/) for more details.

## License

MIT
